<template data-sly-template.furniturePromo="${@ cartModel, stepCartModel}"> 
  <sly data-sly-set.texts="${stepCartModel.textValues}"></sly>
  <sly data-sly-set.promo1="${stepCartModel.promo1}"></sly>
  <sly data-sly-set.promo2="${stepCartModel.promo2}"></sly>
  <sly data-sly-set.promo1Type="${promo1.tipologiaPromozione}"></sly>
  <!-- sly data-sly-set.promo1Type="${promo1 && !promo1type && ('luce' in promo1.tipologiaPromozione) ? 'luce' : promo1Type}"></sly>
  <sly data-sly-set.promo1Type="${promo1 && !promo1Type && ('gas' in promo1.tipologiaPromozione) ? 'gas' : promo1Type}"></sly -->
  <sly data-sly-set.promo2Type="${promo2.tipologiaPromozione}"></sly>
  <!-- sly data-sly-set.promo2Type="${promo2 && !promo2Type && ('luce' in promo2.tipologiaPromozione) ? 'luce' : promo2Type}"></sly>
  <sly data-sly-set.promo2Type="${promo2 && !promo2Type && ('gas' in promo2.tipologiaPromozione) ? 'gas' : promo2Type}"></sly -->
  <!-- promo1type=${promo1Type} promo2type=${promo2Type} -->
  <style>
    .promo1-title-${resource.name @ context='styleString'} .egl-modale-step-promo-banner:before {
      background-color: ${promo1.coloreBackgroundFasciaPromozionale @ context='styleString'};
    }
    .promo2-title-${resource.name @ context='styleString'} .egl-modale-step-promo-banner:before {
      background-color: ${promo2.coloreBackgroundFasciaPromozionale @ context='styleString'};
    }
  </style>
  
  <span
    aria-hidden="true"
    class="position-absolute egl-mod-comm-prevIcon d-lg-none"
  ></span>

  <div class="progress w-100 position-absolute">
    <div
      style="width: 4%;"
      class="progress-bar"
      role="progressbar"
      aria-valuenow="4%"
      aria-valuemin="0"
      aria-valuemax="100"
    ></div>
  </div>

  <div class="wrapper-selezione-fornitura">
    <div class="d-flex flex-wrap egl-modal-body-carrellostep-contenuto">
      <div class="flex-b-100 d-flex justify-content-lg-center title-${resource.name}">
        <div class="text-left egl-modal-carrellostep-titolo">
          <b>${texts['selectFornitureTitle'] @ context='html'}</b>
        </div>
      </div>
      <div data-sly-test="${promo1}" class="flex-b-100 d-flex justify-content-center position-lg-relative promo1-title-${resource.name}"
        data-start-promo="${promo1.dataInizioPromozione}" data-end-promo="${promo1.dataFinePromozione}" data-promo-type="${promo1Type}">
        <div class="egl-modale-step-promo-banner position-absolute" style="background-color: ${promo1.coloreBackgroundFasciaPromozionale @ context='styleString'};">
          <div class="egl-modale-step-promo-banner-testo">
            ${promo1.copyPromozione @ context='html'}
          </div>
          <img loading="lazy" data-sly-use.image1="${'com.egl.core.models.utils.ImageModel' @ imagePath=promo1.immagineFasciaPromo}" 
            src="${promo1.immagineFasciaPromo}" alt="${image1.description}"/>
        </div>
        <div class="text-left egl-modal-carrellostep-titolo">
          <b>${texts['selectFornitureTitle'] @ context='html'}</b>
        </div>
      </div>
      <div data-sly-test="${promo2}" class="flex-b-100 d-flex justify-content-center position-lg-relative promo2-title-${resource.name}"
        data-start-promo="${promo2.dataInizioPromozione}" data-end-promo="${promo2.dataFinePromozione}" data-promo-type="${promo2Type}">
        <div class="egl-modale-step-promo-banner position-absolute" style="background-color: ${promo2.coloreBackgroundFasciaPromozionale @ context='styleString'};">
          <div class="egl-modale-step-promo-banner-testo">
            ${promo2.copyPromozione @ context='html'}
          </div>
          <img loading="lazy" data-sly-use.image2="${'com.egl.core.models.utils.ImageModel' @ imagePath=promo2.immagineFasciaPromo}" 
            src="${promo2.immagineFasciaPromo}" alt="${image2.description}"/>
        </div>
        <div class="text-left egl-modal-carrellostep-titolo">
          <b>${texts['selectFornitureTitle'] @ context='html'}</b>
        </div>
      </div>
      <div class="egl-box-fornitura-carrellostep" onclick="selezionaOpzioneCarrelloStep()">
        <div class="egl-box-fornitura-carrellostep-icon">
          <img loading="lazy" src="/etc.clientlibs/enigaseluce/clientlibs/clientlib-site/resources/assets/icone-luce-e-gas.svg" alt="" />
        </div>
        <div
          class="egl-box-fornitura-carrellostep-nome"
        >
          <b>${texts['luceEGas'] @ context='html'}</b>
        </div>
      </div>
      <div class="egl-box-fornitura-carrellostep" onclick="selezionaOpzioneCarrelloStep()">
        <div class="egl-box-fornitura-carrellostep-icon">
          <img loading="lazy" src="/etc.clientlibs/enigaseluce/clientlibs/clientlib-site/resources/assets/fill-1.svg" alt="" />
        </div>
        <div
          class="egl-box-fornitura-carrellostep-nome"
        >
          <b>${texts['luce'] @ context='html'}</b>
        </div>
      </div>
      <div
        class="egl-box-fornitura-carrellostep"
        onclick="selezionaOpzioneCarrelloStep()"
      >
        <div class="egl-box-fornitura-carrellostep-icon">
          <img loading="lazy" src="/etc.clientlibs/enigaseluce/clientlibs/clientlib-site/resources/assets/fill-1-copy.svg" alt="" />
        </div>
        <div class="egl-box-fornitura-carrellostep-nome">
          <b>${texts['gas'] @ context='html'}</b>
        </div>
      </div>
    </div>
    <div class="d-flex flex-wrap egl-modal-body-carrellostep-footer">
      <button
        type="button"
        class="p20-egl egl-cart-cta-primary-yellow"
        onclick="goToStep('next')"
      >
        ${texts['confirmAndContinue'] @ context='html'}
      </button>
    </div>
  </div>
  
  <sly data-sly-test="${stepCartModel.offerImage}" 
    data-sly-use.renditionsManager="${'com.egl.core.models.utils.RenditionsManager' @ imagePath=stepCartModel.offerImage}"
    data-sly-use.imageAlt="${'com.egl.core.models.utils.ImageModel' @ imagePath=stepCartModel.offerImage}">
    <div class="egl-carrellostep-promo d-lg-block d-none img-banner-${resource.name}">
      <picture>
        <sly data-sly-list="${renditionsManager.renditions.keySet.iterator}">
          <source media="(min-width: ${item}) and (min-resolution: 150dpi)" srcset="${renditionsManager.doubledRenditions[item] @ context='uri'}">
					<source media="(min-width: ${item})" srcset="${renditionsManager.renditions[item] @ context='uri'}">
        </sly>
        <img loading="lazy" src="${renditionsManager.renditions['1920px']}" alt="${imageAlt.description}">
      </picture>
    </div>
  </sly>
  <sly data-sly-test="${promo1}" 
    data-sly-use.renditionsManager="${'com.egl.core.models.utils.RenditionsManager' @ imagePath=promo1.immagineHeroBanner}"
    data-sly-use.imageAlt="${'com.egl.core.models.utils.ImageModel' @ imagePath=promo1.immagineHeroBanner}">
    <div class="egl-carrellostep-promo d-lg-block d-none img-banner-promo1-${resource.name}"
      data-start-promo="${promo1.dataInizioPromozione}" data-end-promo="${promo1.dataFinePromozione}" data-promo-type="${promo1Type}">
      <picture>
        <sly data-sly-list="${renditionsManager.renditions.keySet.iterator}">
          <source media="(min-width: ${item}) and (min-resolution: 150dpi)" srcset="${renditionsManager.doubledRenditions[item] @ context='uri'}">
					<source media="(min-width: ${item})" srcset="${renditionsManager.renditions[item] @ context='uri'}">
        </sly>
        <img loading="lazy" src="${renditionsManager.renditions['1920px']}" alt="${imageAlt.description}">
      <picture>
    </div>
  </sly>
  <sly data-sly-test="${promo2}" 
    data-sly-use.renditionsManager="${'com.egl.core.models.utils.RenditionsManager' @ imagePath=promo2.immagineHeroBanner}"
    data-sly-use.imageAlt="${'com.egl.core.models.utils.ImageModel' @ imagePath=promo2.immagineHeroBanner}">
    <div class="egl-carrellostep-promo d-lg-block d-none img-banner-promo2-${resource.name}"
      data-start-promo="${promo2.dataInizioPromozione}" data-end-promo="${promo2.dataFinePromozione}" data-promo-type="${promo2Type}">
      <picture>
        <sly data-sly-list="${renditionsManager.renditions.keySet.iterator}">
          <source media="(min-width: ${item}) and (min-resolution: 150dpi)" srcset="${renditionsManager.doubledRenditions[item] @ context='uri'}">
					<source media="(min-width: ${item})" srcset="${renditionsManager.renditions[item] @ context='uri'}">
        </sly>
        <img loading="lazy" src="${renditionsManager.renditions['1920px']}" alt="${imageAlt.description}">
      </picture>
    </div>
  </sly>

  <script data-sly-test="${promo1 || promo2}" id="promo-script">
    (function($) {
      promotionHideShow(".title-${resource.name @ context='scriptToken'}",".promo1-title-${resource.name @ context='scriptToken'}",".promo2-title-${resource.name @ context='scriptToken'}", null);
      promotionHideShow(".img-banner-${resource.name @ context='scriptToken'}",".img-banner-promo1-${resource.name @ context='scriptToken'}",".img-banner-promo2-${resource.name @ context='scriptToken'}", null);
      promotionForTypeHideShow(".promo1-title-${resource.name @ context='scriptToken'}",".promo2-title-${resource.name @ context='scriptToken'}");
      promotionForTypeHideShow(".img-banner-promo1-${resource.name @ context='scriptToken'}",".img-banner-promo2-${resource.name @ context='scriptToken'}");
    })($);
  </script>
</template>