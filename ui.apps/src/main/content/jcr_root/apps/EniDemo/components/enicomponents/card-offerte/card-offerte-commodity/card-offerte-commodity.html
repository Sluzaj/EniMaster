

<sly data-sly-use.templates="core/wcm/components/commons/v1/templates.html"
	    data-sly-test.testing="${!properties.prova}"> </sly>

<sly data-sly-call="${templates.placeholder @ isEmpty=testing}"></sly>

<sly data-sly-use.fragModel="com.egl.core.models.cardofferte.CardOfferteModel"></sly>
	
		<div class="cardOfferte-edit-${resource.name}">	
               <!-- CARD OFFERTE EDITORIALE -->     
             <div data-sly-test.offerta="${fragModel.offerta}" 
             	class="card-offerte-card d-flex flex-column ">
                 <div data-sly-test="${properties.tipoCard == 'cardLabel'}" class="card-offerta-pecetta" 
                 	style="background-color: ${properties.coloreBgLabel @ context='styleToken'}">
                     ${properties.label}
                 </div>
                 <div class="card-offerte-img" data-sly-use.imageHero="${'com.egl.core.models.utils.ImageModel' @ imagePath=offerta.imgHeroBanner}">
                     <picture data-sly-use.renditionsManager="${'com.egl.core.models.utils.RenditionsManager' @ imagePath=offerta.imgHeroBanner}" >
	                            <sly data-sly-list="${renditionsManager.renditions.keySet.iterator}">
	                                <source media="(min-width: ${item}) and (min-resolution: 150dpi)" srcset="${renditionsManager.doubledRenditions[item] @ context='uri'}">
	                                <source media="(min-width: ${item})" srcset="${renditionsManager.renditions[item] @ context='uri'}">
	                            </sly>
                    		<img loading="lazy"  src="${renditionsManager.renditions['1920px']}" alt="${imageHero.description}">
                    </picture>
                 </div>
                 <div class="card-offerte-card-body-center d-flex flex-column">
                     <div class="d-flex title-subtitle-container">
                         <div class="card-offerte-card-body-title">
                             ${offerta.nomeOfferta @context='html'}
                         </div>
                         <div class="card-offerte-card-body-description">
                             ${properties.tipoFornitura}
                         </div>
                     </div>
                     <div class="card-offerte-card-body-text">
                        ${properties.descrizioneCard @context='html'}
                     </div>
                     <div class="bg-link text-center">
	                     <a data-sly-test="${properties.labelCtaCard && properties.urlCtaCard}"
	            				href="${properties.urlCtaCard}" target="${properties.targetCtaCard}" title="${properties.altCtaCard}">
	                         <button type="button" class="btn btn-link card-offerte-cta-secondary">
	                             ${properties.labelCtaCard}
	                         </button>
	                     </a>
                     </div>
                 </div>
                 <div class="mask"></div>
             </div>
 </div>


	<sly data-sly-test="${properties.promo}">
	<!-- PROMOZIONE 1 -->
		<div data-sly-test.promozione1="${fragModel.promo1}" class="cardOfferte-promo1-${resource.name}" 
			data-start-promo="${promozione1.dataInizioPromozione}" data-end-promo="${promozione1.dataFinePromozione}">
	                <div class="card-offerte-card d-flex flex-column">
	                    <div class="card-offerte-countdown-container" style="background-color: ${promozione1.coloreBackgroundFasciaPromozionale@ context='styleToken'}">
	                        <div class="card-offerte-countdown-div" 
	                        	data-sly-use.image1="${'com.egl.core.models.utils.ImageModel' @ imagePath=promozione1.immaginePerBandSticky}">
	                            <div class="card-offerte-countdown-content d-flex flex-column">
	                                <div class="cap12-egl">PROMO ATTIVA! Scade tra:</div>
	                                <div class="d-flex card-offerte-countdown-tempo">
	                                    <div class="egl-promo-cd-giorno">
											<div>01</div>
										</div>
										<div>:</div>
										<div class="egl-promo-cd-ore">
											<div>12</div>
										</div>
										<div>:</div>
										<div class="egl-promo-cd-minuti">
											<div>12</div>
										</div>
	                                </div>
	                                <div class="d-flex card-offerte-countdown-data">
	                                    <div>GIORNO</div>
	                                    <div>ORE</div>
	                                    <div>MINUTI</div>
	                                </div>
	                            </div>
	                            <img loading="lazy"  class="card-offerte-countdown-asset" src="${promozione1.immaginePerBandSticky}" alt="${image1.description}" />
	                        </div>
	                    </div>
	                    <div class="card-offerte-card-body d-flex flex-column">
	                        <div class="d-flex title-subtitle-container">
	                            <div class="card-offerte-card-body-title">
	                                ${promozione1.nomeOfferta @context='html'}
	                            </div>
	                            <div class="card-offerte-card-body-description">
	                                ${properties.tipoFornitura}
	                            </div>
	                        </div>
	                        <div class="card-offerte-card-body-text">
	                            ${properties.descrizioneCard @context='html'}
	                        </div>
	                        <div class="bg-link text-center">
		                        <a data-sly-test="${properties.labelCtaCard && properties.urlCtaCard}"
	            				href="${properties.urlCtaCard}" target="${properties.targetCtaCard}" title="${properties.altCtaCard}"> 
		                            <button type="button" class="btn btn-link card-offerte-cta-secondary">
		                                ${properties.labelCtaCard}
		                            </button>
		                       </a>
	                        </div>
	                    </div>
	                    <div class="mask"></div>
	                    <div class="card-offerte-bottom-text-and-img-container" style="background-color: ${promozione1.coloreBackgroundFasciaPromozionale@ context='styleToken'}">
	                        <div class="card-offerte-bottom-text-container">
	                            <span class="card-offerte-bottom-text">
	                                ${promozione1.copyPromozione @context='html'}
	                            </span>
	                        </div>
	                        <div class="card-offerte-bottom-image-container"
	                        	data-sly-use.imageFascia1="${'com.egl.core.models.utils.ImageModel' @ imagePath=promozione1.immagineFasciaPromo}">
	                            <img loading="lazy"  class="card-offerte-bottom-image" src="${promozione1.immagineFasciaPromo}" alt="${imageFascia1.description}" />
	                        </div>
	                    </div>
	                </div>
             </div>    
                
                <!-- PROMOZIONE 2 -->
                <div data-sly-test.promozione2="${fragModel.promo2}" class="cardOfferte-promo2-${resource.name}"
                data-start-promo="${promozione2.dataInizioPromozione}" data-end-promo="${promozione2.dataFinePromozione}">
	               <div class="card-offerte-card d-flex flex-column">
	                    <div class="card-offerte-countdown-container" style="background-color: ${promozione2.coloreBackgroundFasciaPromozionale@ context='styleToken'}">
	                        <div class="card-offerte-countdown-div" data-sly-use.image2="${'com.egl.core.models.utils.ImageModel' @ imagePath=promozione2.immaginePerBandSticky}">
	                            <div class="card-offerte-countdown-content d-flex flex-column">
	                                <div class="cap12-egl">PROMO ATTIVA! Scade tra:</div>
	                                <div class="d-flex card-offerte-countdown-tempo">
	                                    <div class="egl-promo-cd-giorno">
											<div>01</div>
										</div>
										<div>:</div>
										<div class="egl-promo-cd-ore">
											<div>12</div>
										</div>
										<div>:</div>
										<div class="egl-promo-cd-minuti">
											<div>12</div>
										</div>
	                                </div>
	                                <div class="d-flex card-offerte-countdown-data">
	                                    <div>GIORNO</div>
	                                    <div>ORE</div>
	                                    <div>MINUTI</div>
	                                </div>
	                            </div>
	                            <img loading="lazy"  class="card-offerte-countdown-asset" src="${promozione2.immaginePerBandSticky}" alt="${image2.description}" />
	                        </div>
	                    </div>
	                    <div class="card-offerte-card-body d-flex flex-column">
	                        <div class="d-flex title-subtitle-container">
	                            <div class="card-offerte-card-body-title">
	                                 ${promozione2.nomeOfferta @context='html'}
	                            </div>
	                            <div class="card-offerte-card-body-description">
	                                ${properties.tipoFornitura}
	                            </div>
	                        </div>
	                        <div class="card-offerte-card-body-text">
	                            ${properties.descrizioneCard @context='html'}
	                        </div>
	                        <div class="bg-link text-center">
		                        <a data-sly-test="${properties.labelCtaCard && properties.urlCtaCard}"
	            				href="${properties.urlCtaCard}" target="${properties.targetCtaCard}" title="${properties.altCtaCard}"> 
		                            <button type="button" class="btn btn-link card-offerte-cta-secondary">
		                                ${properties.labelCtaCard}
		                            </button>
		                       </a>
	                        </div>
	                    </div>
	                    <div class="mask"></div>
	                    <div class="card-offerte-bottom-text-and-img-container" style="background-color: ${promozione2.coloreBackgroundFasciaPromozionale@ context='styleToken'}">
	                        <div class="card-offerte-bottom-text-container">
	                            <span class="card-offerte-bottom-text">
	                               ${promozione2.copyPromozione @context='html'}
	                            </span>
	                        </div> 
	                        <div class="card-offerte-bottom-image-container" 
	                        	data-sly-use.imageFascia2="${'com.egl.core.models.utils.ImageModel' @ imagePath=promozione2.immagineFasciaPromo}">
	                            <img loading="lazy"  class="card-offerte-bottom-image" src="${promozione2.immagineFasciaPromo}" alt="${imageFascia2.description}" />
	                        </div>
	                    </div>
	                </div>
                </div>
 </sly>
 
<script data-sly-test="${wcmmode.disabled && (fragModel.promo1 || fragModel.promo2)}">
	(function($) {
		$(document).ready( function() {
		  promotionHideShow(".cardOfferte-edit-${resource.name @ context='scriptToken'}",".cardOfferte-promo1-${resource.name @ context='scriptToken'}",".cardOfferte-promo2-${resource.name @ context='scriptToken'}");
      countdownElements(".cardOfferte-promo1-${resource.name @ context='scriptToken'}", ".egl-promo-cd-giorno", ".egl-promo-cd-ore", ".egl-promo-cd-minuti");
      countdownElements(".cardOfferte-promo2-${resource.name @ context='scriptToken'}", ".egl-promo-cd-giorno", ".egl-promo-cd-ore", ".egl-promo-cd-minuti");
    });
	})($);
</script>

